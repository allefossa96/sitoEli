---
// /src/layouts/Layout.astro
export interface Props {
  title: string;
}
const { title } = Astro.props;

import "bootstrap/dist/css/bootstrap.css";
import { Breadcrumb } from "astro-bootstrap";
import background from "../assets/background.svg";
import profile1 from "../assets/photos/profile1.png";
import profile2 from "../assets/photos/profile2.png";
import profile3 from "../assets/photos/profile3.png";
import profile4 from "../assets/photos/profile4.png";

const portraits = [profile1, profile2, profile3, profile4];
const randomPortrait = portraits[Math.floor(Math.random() * portraits.length)];

// Ottieni il percorso della pagina corrente
const currentPath = new URL(Astro.request.url).pathname;
const isActive = (href: string) => {
  if (href === "/" && currentPath === "/") return true;
  if (href !== "/" && currentPath.startsWith(href)) return true;
  return false;
};
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>
  <body>
    <img id="background" src={background.src} alt="" fetchpriority="high" />
    <header class="site-header">
      <div class="header-title py-4 px-5">
        <h1>Dott.ssa Eleonora Fossa</h1>
        <p class="subtitle">Psicologa e Psicoterapeuta</p>
      </div>
      <nav
        class="navbar navbar-expand-lg navbar-light navbar-custom sticky-top"
      >
        <div class="container-lg">
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarScroll"
            aria-controls="navbarScroll"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarScroll">
            <ul
              class="navbar-nav mx-auto my-2 my-lg-0 navbar-nav-scroll gap-2"
              style="--bs-scroll-height: 100px;"
            >
              <li class="nav-item">
                <a
                  class={`nav-link ${isActive("/") ? "active" : ""}`}
                  href="/sitoEli/">Home</a
                >
              </li>
              <li class="nav-item">
                <a
                  class={`nav-link ${isActive("/chisono") ? "active" : ""}`}
                  href="/sitoEli/chisono">Chi Sono - Formazione</a
                >
              </li>
              <li class="nav-item">
                <a
                  class={`nav-link ${isActive("/comelavoro") ? "active" : ""}`}
                  href="/sitoEli/comelavoro">Come lavoro</a
                >
              </li>
              <!-- <li class="nav-item">
                <a
                  class={`nav-link ${isActive("/disturbitrattati") ? "active" : ""}`}
                  href="/sitoEli/disturbitrattati">Disturbi Trattati</a
                >
              </li> -->
              <li class="nav-item">
                <a
                  class={`nav-link ${isActive("/terapiacoppia") ? "active" : ""}`}
                  href="/sitoEli/terapiacoppia">Terapia di coppia</a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <div class="container-lg my-5">
      <div class="row">
        <div class="col-lg-8">
          <slot />
        </div>
        <!-- Sidebar comune a tutte le pagine -->
        <div class="col-lg-4">
          <!-- Ritratto con immagine casuale -->
          <div class="card mb-3">
            <div class="card-body text-center">
              <img
                src={randomPortrait.src}
                id="randomPortrait"
                alt="Ritratto"
                class="img-fluid rounded"
                style="max-width: 100%; height: auto;"
              />
            </div>
          </div>

          <div class="card mb-3">
            <div class="card-body">
              <h3 class="card-title">Contatti e Consulenza</h3>

              <!-- CTA Sezione -->
              <div class="cta-box mb-3">
                <p class="cta-text">
                  <strong>Prenota una consulenza gratuita</strong> per discutere della
                  tua situazione e capire come posso aiutarti.
                </p>
              </div>

              <!-- Icone di contatto -->
              <div class="d-flex gap-3">
                <!-- Numero di telefono -->
                <p>
                  <strong>Tel:</strong>
                  <a href="tel:+393534647601" class="text-decoration-none">
                    +39 353 4647601
                  </a>
                </p>

                <!-- WhatsApp -->
                <a
                  href="https://wa.me/393534647601"
                  target="_blank"
                  rel="noopener noreferrer"
                  title="Contattami su WhatsApp"
                >
                  <img
                    src="/sitoEli/whatsapp.svg"
                    alt="WhatsApp"
                    width="20"
                    height="20"
                  />
                </a>

                <!-- Telefono -->
                <a href="tel:+393534647601" title="Chiama">
                  <img
                    src="/sitoEli/phone.svg"
                    alt="Telefono"
                    width="20"
                    height="20"
                  />
                </a>
              </div>
              <div class="d-flex gap-3">
                <p>
                  <strong>Email:</strong>
                  <a href="mailto:fossa.psy@gmail.com" title="Invia email"
                    >fossa.psy@gmail.com</a
                  >
                  <a href="mailto:fossa.psy@gmail.com" title="Invia email">
                    <img
                      src="/sitoEli/email.svg"
                      alt="Email"
                      width="20"
                      height="20"
                    />
                  </a>
                </p>
              </div>

              <!-- Indirizzi -->
              <p>
                <strong>Ricevo su appuntamento a:</strong>
              </p>
              <ul class="list-unstyled">
                <li class="mb-2">
                  <img
                    src="/sitoEli/location.svg"
                    alt="Posizione"
                    width="16"
                    height="16"
                    class="me-2"
                    style="display: inline;"
                  />
                  <a
                    href="https://www.google.com/maps/search/Corso+Martiri+222,+Castelfranco+Emilia"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-decoration-none"
                  >
                    Corso Martiri 222, Castelfranco Emilia
                  </a>
                </li>
                <li>
                  <img
                    src="/sitoEli/location.svg"
                    alt="Posizione"
                    width="16"
                    height="16"
                    class="me-2"
                    style="display: inline;"
                  />
                  <a
                    href="https://www.google.com/maps/search/Via+Pietro+Manodori+4,+Reggio+Emilia"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-decoration-none"
                  >
                    Via Pietro Manodori 4, Reggio Emilia
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <div class="card">
            <div class="card-body">
              <h3 class="card-title">Scrivimi un messaggio</h3>
              <form>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="nome" class="form-label">Nome</label>
                    <input type="text" class="form-control" id="nome" />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="cognome" class="form-label">Cognome</label>
                    <input type="text" class="form-control" id="cognome" />
                  </div>
                </div>
                <div class="mb-3">
                  <label for="email" class="form-label">Indirizzo email</label>
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="messaggio" class="form-label">Messaggio</label>
                  <textarea
                    class="form-control"
                    id="messaggio"
                    rows="3"
                    placeholder="Inserisci qui il tuo messaggio"></textarea>
                </div>
                <button type="submit" class="btn btn-dark w-100">Invia</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="site-footer">
      <div class="container-lg py-3">
        <div class="row">
          <div class="col-md-4 mb-3 mb-md-0">
            <h5>Dott.ssa Eleonora Fossa</h5>
            <p>Psicologa e Psicoterapeuta</p>
            <p class="small text-muted">
              Orientamento cognitivo-costruttivista
            </p>
          </div>
          <div class="col-md-4 mb-3 mb-md-0">
            <h5>Contatti</h5>
            <p>
              <a href="tel:+393534647601" class="text-decoration-none"
                >+39 353 4647601</a
              >
            </p>
            <p>
              <a href="mailto:fossa.psy@gmail.com" class="text-decoration-none"
                >fossa.psy@gmail.com</a
              >
            </p>
          </div>
          <div class="col-md-4">
            <h5>Sedi</h5>
            <p class="small mb-2">
              <img
                src="/sitoEli/location.svg"
                alt="Posizione"
                width="16"
                height="16"
                class="me-2"
                style="display: inline;"
              /><a
                href="https://www.google.com/maps/search/Corso+Martiri+222,+Castelfranco+Emilia"
                target="_blank"
                rel="noopener noreferrer"
                class="text-decoration-none"
              >
                Corso Martiri 222, Castelfranco Emilia
              </a>
            </p>
            <p class="small">
              <img
                src="/sitoEli/location.svg"
                alt="Posizione"
                width="16"
                height="16"
                class="me-2"
                style="display: inline;"
              /><a
                href="https://www.google.com/maps/search/Via+Pietro+Manodori+4,+Reggio+Emilia"
                target="_blank"
                rel="noopener noreferrer"
                class="text-decoration-none"
              >
                Via Pietro Manodori 4, Reggio Emilia
              </a>
            </p>
          </div>
        </div>
        <hr class="my-2" />
        <p class="text-center text-muted small mb-0">
          &copy; 2026 Dott.ssa Eleonora Fossa. Tutti i diritti riservati.
        </p>
      </div>
    </footer>

    <script>
      import "bootstrap/dist/js/bootstrap.bundle.js";
    </script>
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  body > div {
    flex: 1;
  }

  #background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    filter: blur(100px);
  }

  .card {
    border: 1px solid #dee2e6;
  }

  /* Header Styling */
  .site-header {
    background-color: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 100;
  }

  .header-title {
    background: linear-gradient(135deg, #ef7851 0%, #d86340 100%);
    color: white;
    margin: 0;
    padding: 2.5rem 2rem !important;
  }

  .header-title h1 {
    margin: 0;
    font-size: 2.2rem;
    font-weight: 700;
    letter-spacing: 0.5px;
  }

  .header-title .subtitle {
    margin: 0.5rem 0 0 0;
    font-size: 1.05rem;
    font-weight: 400;
    opacity: 0.95;
  }

  .navbar-custom {
    background-color: rgba(255, 255, 255, 0.98);
    border-top: 1px solid rgba(239, 120, 81, 0.2);
    padding: 1rem 0;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }

  .navbar-custom.sticky-top {
    top: 0;
  }

  .navbar-custom .navbar-nav {
    gap: 0.5rem;
  }

  .navbar-custom .nav-link {
    color: #333 !important;
    font-weight: 500;
    transition: color 0.3s ease;
    font-size: 0.95rem;
    padding: 0.5rem 1rem !important;
  }

  .navbar-custom .nav-link:hover {
    color: #ef7851 !important;
  }

  .navbar-custom .nav-link.active {
    color: white !important;
    background-color: #ef7851 !important;
    border-radius: 6px;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(239, 120, 81, 0.3);
  }

  /* Select nel navbar */
  .nav-select {
    color: #333 !important;
    font-weight: 500;
    font-size: 0.95rem;
    padding: 0.5rem 1rem !important;
    border: 1px solid #ddd !important;
    border-radius: 6px !important;
    background-color: white !important;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .nav-select:hover {
    border-color: #ef7851 !important;
    color: #ef7851 !important;
  }

  .nav-select:focus {
    border-color: #ef7851 !important;
    box-shadow: 0 0 0 0.2rem rgba(239, 120, 81, 0.25) !important;
    outline: none !important;
  }

  /* Page Header */
  .page-header {
    border-bottom: 2px solid #ef7851;
    padding-bottom: 1rem;
  }

  .page-title {
    font-size: 2rem;
    font-weight: 700;
    color: #2c3e50;
    margin: 0;
    letter-spacing: 0.3px;
  }

  /* Main content area */
  .container-lg {
    max-width: 1200px;
    margin-top: 1rem !important;
    margin-bottom: 1rem !important;
  }

  .row > div {
    margin-bottom: 1.5rem;
  }

  /* CTA Box */
  .cta-box {
    background: rgba(239, 120, 81, 0.08);
    border-left: 3px solid #ef7851;
    padding: 1rem;
    border-radius: 6px;
  }

  .cta-text {
    color: #333;
    font-size: 0.95rem;
    line-height: 1.6;
    margin: 0;
  }

  /* Footer */
  .site-footer {
    background: linear-gradient(135deg, #ef7851 0%, #d86340 100%);
    color: white;
    margin-top: auto;
  }

  .site-footer h5 {
    font-weight: 700;
    margin-bottom: 1rem;
  }

  .site-footer a {
    color: rgba(255, 255, 255, 0.8);
    transition: color 0.3s ease;
  }

  .site-footer a:hover {
    color: white;
  }

  .site-footer hr {
    border-color: rgba(255, 255, 255, 0.2);
  }

  .site-footer .text-muted {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  @media (max-width: 991.98px) {
    .header-title {
      padding: 2rem 1.5rem !important;
    }

    .header-title h1 {
      font-size: 1.8rem;
    }

    .navbar-custom .nav-link {
      padding: 0.5rem 0.75rem !important;
      font-size: 0.9rem;
    }
  }
</style>
